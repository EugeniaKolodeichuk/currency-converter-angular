<div class="header">
    <h2>Exchange rate today {{ currentDate | date: "dd.MM.YYYY" }}</h2>
    <div class="rate-buttons">
        <div class="update-rate">
            
            <input 
                matInput  
                [matDatepicker]="USDDatepicker" 
                placeholder="Choose a date" 
                [(ngModel)]="datepickerData"
                #pickerData
            >
            <mat-datepicker-toggle matSuffix  [for]="USDDatepicker"></mat-datepicker-toggle>
            <mat-datepicker #USDDatepicker [startAt]="startDate" (opened)="datepickerOpen()"></mat-datepicker>  
            
            
            <button mat-raised-button (click)="updateRate()">Update USD</button>
            <p>USD: <b>{{ currentRateUSD }}</b></p>
        </div>
        <div class="update-rate">
            
            <input matInput  [matDatepicker]="EURDatepicker" placeholder="Choose a date">
            <mat-datepicker-toggle matSuffix [for]="EURDatepicker"></mat-datepicker-toggle>
            <mat-datepicker #EURDatepicker [startAt]="startDate"></mat-datepicker> 
            
            <button mat-raised-button>Update EUR</button>
            <p>EUR: <b>{{ currentRateEUR }}</b></p>
        </div>
    </div>
</div>

<div class="converter-container">
    <h1>Currency converter</h1>
    <input [ngModel]="amount$ | async" (ngModelChange)="onAmountChange($event)">
    <div *ngIf="amountValue" class="container">
        <div class="converted-currencies" *ngFor="let currency of currenciesRates">
            <p>{{ (currency.code + ' ' + (currency.value * amountValue).toFixed(2)) }}</p>
            <button mat-raised-button>Add currency</button>
        </div>
    </div>
</div>

<ng-container *ngIf="isLoading$ | async">
    <div class="overlay">
        <div class="overlay-wrapper">
            <div class="overlay-spinner">
                <mat-spinner></mat-spinner>
            </div>
        </div>
    </div>
</ng-container>
